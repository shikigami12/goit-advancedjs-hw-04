import{a as c,S as m,i as h}from"./assets/vendor-DVva8SYe.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}})();class d{constructor(){this.params={key:"",q:"",image_type:"photo",orientation:"horizontal",safesearch:!0}}setApiKey(e){this.params.key=e}setQuery(e){this.params.q=e}}class u{constructor(e){this.apiKey=e,c.defaults.baseURL="https://pixabay.com/api/"}fetchImages(e){const r=new d;return r.setApiKey(this.apiKey),r.setQuery(e),this._get("",{params:r.params})}_get(e,r){return c.get(e,r).then(s=>s.data.hits||s.data).catch(s=>this._onError(s,e,r))}_onError(e,r,s){if(e.status===429){const t=e.response.headers["x-ratelimit-reset"]||e.response.headers["X-RateLimit-Reset"]||60;return console.warn(`Rate limit exceeded. Retrying after ${t} seconds...`),new Promise(n=>{setTimeout(()=>{n(this._get(r,s))},t*1e3)})}else throw console.error("Error fetching images:",e),e}}class g{constructor(e){this.id=e.id,this.type=e.type,this.tags=e.tags,this.webformatURL=e.webformatURL,this.imageURL=e.largeImageURL,this.views=e.views,this.downloads=e.downloads,this.likes=e.likes,this.comments=e.comments,this.user=e.user}}class p{constructor(){this._imageElement=document.createElement("img")}setImage(e){this._imageElement.src=e.webformatURL,this._imageElement.alt=e.tags,this._imageElement.width=360,this._imageElement.height=200,this._imageElement.title=e.tags,this._imageElement.setAttribute("data-id",e.id.toString()),this._imageElement.setAttribute("data-user",e.user)}render(){return this._imageElement}}class f{constructor(e,r){if(this._parentElement=r,!this._parentElement)throw new Error(`Parent element ${r} not found`);const s=this._parentElement.querySelector(`.${e}`);if(s){this._galleryElement=s;return}this._galleryElement=document.createElement("ul"),this._galleryElement.classList.add(e)}addImage(e){const r=new p;r.setImage(e);const s=document.createElement("li"),t=document.createElement("a");t.href=e.imageURL,t.append(r.render()),t.append(this._generateDescription(e)),s.appendChild(t),this._galleryElement.appendChild(s)}_generateDescription(e){const r=["Likes","Views","Comments","Downloads"],s=document.createElement("table"),t=document.createElement("tr");r.forEach(l=>{const a=document.createElement("th");a.textContent=l,t.appendChild(a)}),s.appendChild(t);const n=document.createElement("tr");return[e.likes,e.views,e.comments,e.downloads].forEach(l=>{const a=document.createElement("td");a.textContent=`${l}`,n.appendChild(a)}),s.appendChild(n),s}render(){if(!this._parentElement)throw new Error(`Parent element ${this._parentElement} not found`);this._parentElement.appendChild(this._galleryElement)}clear(){this._galleryElement.innerHTML="",this._parentElement.innerHTML=""}}class y{constructor(){this._searchForm=document.querySelector("form.search-form"),this._galleryElement=document.querySelector(".gallery"),this._galleryRenderer=new f("gallery",this._galleryElement),this._pixabayApi=new u("49652038-e061cdaf0adfcf3d7bc5fddbb"),this._lightbox=new m("div.gallery ul.gallery li a",{captionsData:"alt",captionDelay:250}),this._loader=document.querySelector(".loader")}init(){this._searchForm.addEventListener("submit",e=>{e.preventDefault();const r=e.target.querySelector('input[name="searchQuery"]').value;if(!r){h.error({message:"Please enter a search term."});return}this._onSearch(r)})}_onSearch(e){this._galleryRenderer.clear(),this._searchForm.reset(),this._toggleLoader(),this._pixabayApi.fetchImages(e).then(r=>{if(this._toggleLoader(),r.length===0){h.show({color:"#EF4040",icon:"icon-close",title:"❌",message:"Sorry, there are no images matching your search query. Please try again!"});return}r.forEach(s=>{this._galleryRenderer.addImage(new g(s))}),this._galleryRenderer.render(),this._lightbox.refresh()})}_toggleLoader(){this._loader.classList.toggle("show")}}new y().init();
//# sourceMappingURL=index.js.map
